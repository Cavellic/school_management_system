{% extends 'dashboard/basePrincipalDashboard.html' %}

{% load static %}

<!--css-->
<link rel="stylesheet" href="{% static 'css/style.css' %}">

<!--font-awesome-->
<link rel="stylesheet" href="{% static 'fontawesome-free-6.4.0-web/css/all.min.css' %}">

<!--Bootstrap-->
<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">

<!--material icons-->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+outline" rel="stylesheet">

{% block content %}

<!--main-->
<main class="main-container">

    {% if messages %}
    {% for msg in messages %}
    <div class="msg msg-centered">
        <i class="fa fa-circle-check"></i>
        <br>
        {{msg}}
        <br>

        <a href="" class="btn btn-success mt-3">Ok</a>

    </div>
    {% endfor %}
    {% endif %}

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Success</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center text-success mt-3">
                        <i style="color: green; font-size: 95px;" class="fa fa-check-circle text-center"></i>
                        <br>
                        <h5 class="mt-3">
                            Application has been successfully approved
                        </h5>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4">
            <h3 style="padding-left: 10px; color: #fff;">All Students</h3>
            <br>
        </div>
        <div class="col-md-4">
            <a class="link" href="{% url 'studentReg' %}">
                <i class="fa fa-plus" style=" font-size: 20px;"></i>
                <normal style="font-size: 22px; "> &nbsp;&nbsp;Add New Student</normal>
            </a>
            <br>
            <br>
        </div>
        <div class="col">
            <form action="" method="get">
                <normal style="color: #fff;">
                    {{myFilter.form}}
                </normal>

                <button class="btn btn-primary" type="submit">
                    Search
                </button>
            </form>
        </div>

    </div>


    <table class="product-catalogue-table mt-2" border="1">
        <tr class="th-row">
            <th style="padding: 10px;">Reg Number</th>
            <th>Name</th>
            <th>Surname</th>
            <th>Residential Address</th>
            <th>Telephone No.</th>
            <th>Date of Birth</th>
            <th>Id Number</th>
            <th>Action</th>
        </tr>

        {% for student in students %}
        <tr style="background-color: lightgoldenrodyellow;" class="table-data">
            <td style="padding: 10px;">{{student.id}}</td> &nbsp;
            <td>{{student.first_name}}</td> &nbsp;
            <td>{{ student.last_name }}</td>
            <td>{{ student.residential_address }}</td>
            <td>{{ student.tel_number }}</td>
            <td>{{ student.date_of_birth }}</td>
            <td>{{ student.id_number }}</td>
            <td>
                <a href="{% url 'studentInfo' student.id %}"
                    style="color: blue; font-size: 20px; text-decoration: none;">
                    <abbr title="More Info"><i class="fa fa-circle-info"></i></abbr>
                </a>
                &nbsp; &nbsp;

                <a href="{% url 'deleteStudent' student.id %}" style="color: rgb(172, 10, 10); font-size: 20px;">
                    <abbr title="Delete"><i class="fa fa-trash-can"></i></abbr>
                </a>
                &nbsp; &nbsp;
                <a href="{% url 'updateStudent' student.id %}" style="color: rgb(36, 153, 36); font-size: 20px;">
                    <abbr title="Edit"><i class="fa fa-pen-to-square"></i></abbr>
                </a>
            </td>

        </tr>
        {% endfor %}

    </table>

    <br>
    <nav aria-label="Page navigation example">
        <ul class="pagination">
            <li class="page-item">
                {% if students.has_previous %}
                <a style="color: black;" class="page-link" href="?page=1">&laquo;First</a>
            </li>
            <li>
                <a style="color: black;" class="page-link" href="?page={{students.previous_page_number}}">Previous</a>
                {% endif %}
            </li>
            <li class="page-item disabled">
                <a class="page-link" style="color: rgb(0, 0, 0);" href="#">
                    Page {{students.number}} of {{paginator.num_pages}}
                </a>
            </li>
            <li class="page-item">
                {% if students.has_next %}
                <a style="color: rgb(0, 0, 0);"  class="page-link" href="?page={{students.next_page_number}}">Next</a>
            </li>
            <li>
                <a style="color: rgb(0, 0, 0);"  class="page-link" href="?page={{paginator.num_pages}}">Last&raquo;</a>
                {% endif %}
            </li>

        </ul>
    </nav>






    <br>

    <a href="{% url 'all_students_pdf' %}">
        <input style="width: 20%; margin-right: auto; margin-left: auto;" type="button" class="btn btn-primary mt-4"
            value="Download as Pdf">
    </a>

</main>
<!--end main-->

<!-- Modal -->

{% endblock content %}